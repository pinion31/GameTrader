{"version":3,"sources":["../server/server.js"],"names":["express","require","path","cookieParser","bodyParser","mongoose","users","trades","games","requests","connect","Promise","global","session","MongoStore","db","connection","app","use","json","urlencoded","extended","static","secret","saveUninitialized","resave","cookie","maxAge","httpOnly","store","mongooseConnection","ttl","post","req","destroy","get","res","undefined","redirect","sendFile","resolve","__dirname","listen","console","log"],"mappings":";;AAAA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,OAAOD,QAAQ,MAAR,CAAb;AACA;AACA,IAAME,eAAeF,QAAQ,eAAR,CAArB;AACA,IAAMG,aAAaH,QAAQ,aAAR,CAAnB;AACA,IAAMI,WAAWJ,QAAQ,UAAR,CAAjB;AACA,IAAMK,QAAQL,QAAQ,gBAAR,CAAd;AACA,IAAMM,SAASN,QAAQ,iBAAR,CAAf;AACA,IAAMO,QAAQP,QAAQ,gBAAR,CAAd;AACA,IAAMQ,WAAWR,QAAQ,mBAAR,CAAjB;;AAEAI,SAASK,OAAT,CAAiB,2BAAjB;AACAL,SAASM,OAAT,GAAmBC,OAAOD,OAA1B;;AAEA,IAAME,UAAUZ,QAAQ,iBAAR,CAAhB;AACA,IAAMa,aAAab,QAAQ,eAAR,EAAyBY,OAAzB,CAAnB;;AAEA,IAAME,KAAKV,SAASW,UAApB;;AAEA,IAAMC,MAAMjB,SAAZ;;AAEA;AACAiB,IAAIC,GAAJ,CAAQd,WAAWe,IAAX,EAAR;AACAF,IAAIC,GAAJ,CAAQd,WAAWgB,UAAX,CAAsB,EAACC,UAAU,KAAX,EAAtB,CAAR;AACAJ,IAAIC,GAAJ,CAAQf,cAAR;AACAc,IAAIC,GAAJ,CAAQlB,QAAQsB,MAAR,CAAe,QAAf,CAAR;;AAEAL,IAAIC,GAAJ,CAAQL,QAAQ;AACdU,UAAQ,SADM;AAEdC,qBAAmB,IAFL;AAGdC,UAAQ,IAHM;AAIdC,UAAQ,EAACC,QAAQ,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAjB,GAAsB,CAA/B,EAAkCC,UAAU,KAA5C,EAJM,EAI8C;AAC5DC,SAAO,IAAIf,UAAJ,CAAe,EAACgB,oBAAoBf,EAArB,EAAyBgB,KAAK,IAAI,EAAJ,GAAS,EAAT,GAAc,EAA5C,EAAf;AALO,CAAR,CAAR;;AAQAd,IAAIC,GAAJ,CAAQ,QAAR,EAAkBZ,KAAlB;AACAW,IAAIC,GAAJ,CAAQ,QAAR,EAAkBV,KAAlB;AACAS,IAAIC,GAAJ,CAAQ,SAAR,EAAmBX,MAAnB;AACAU,IAAIC,GAAJ,CAAQ,WAAR,EAAqBT,QAArB;;AAEAQ,IAAIe,IAAJ,CAAS,aAAT,EAAwB,UAACC,GAAD,EAAS;AAC/BA,MAAIpB,OAAJ,CAAYqB,OAAZ;AACA;;;;AAID,CAND;;AAQAjB,IAAIkB,GAAJ,CAAQ,GAAR,EAAa,UAACF,GAAD,EAAMG,GAAN,EAAc;AACzB;AACA;AACA,MAAIA,IAAIvB,OAAJ,KAAgBwB,SAApB,EAA+B;AAC7BD,QAAIE,QAAJ,CAAa,GAAb;AACD;;AAEDF,MAAIG,QAAJ,CAAarC,KAAKsC,OAAL,CAAaC,SAAb,EAAwB,WAAxB,EAAqC,YAArC,CAAb;AACD,CARD;;AAUAxB,IAAIyB,MAAJ,CAAW,IAAX,EAAiB,YAAM;AACrBC,UAAQC,GAAR,CAAY,mBAAZ;AACD,CAFD","file":"server.js","sourcesContent":["const express = require('express');\nconst path = require('path');\n// const logger = require('morgan');\nconst cookieParser = require('cookie-parser');\nconst bodyParser = require('body-parser');\nconst mongoose = require('mongoose');\nconst users = require('./routes/users');\nconst trades = require('./routes/trades');\nconst games = require('./routes/games');\nconst requests = require('./routes/requests');\n\nmongoose.connect('mongodb://localhost/local');\nmongoose.Promise = global.Promise;\n\nconst session = require('express-session');\nconst MongoStore = require('connect-mongo')(session);\n\nconst db = mongoose.connection;\n\nconst app = express();\n\n// app.use(logger('dev'));\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({extended: false}));\napp.use(cookieParser());\napp.use(express.static('static'));\n\napp.use(session({\n  secret: 'noodles',\n  saveUninitialized: true,\n  resave: true,\n  cookie: {maxAge: 1000 * 60 * 60 * 24 * 2, httpOnly: false}, // 2 days\n  store: new MongoStore({mongooseConnection: db, ttl: 2 * 24 * 60 * 60})\n}));\n\napp.use('/users', users);\napp.use('/games', games);\napp.use('/trades', trades);\napp.use('/requests', requests);\n\napp.post('/logoutUser', (req) => {\n  req.session.destroy();\n  /*\n  mongoose.connection.disconnect(function () {\n    console.log('Mongoose connection disconnected');\n  });*/\n});\n\napp.get('*', (req, res) => {\n  // makes sure user is logged into before directing\n  // to dashboard\n  if (res.session === undefined) {\n    res.redirect('/');\n  }\n\n  res.sendFile(path.resolve(__dirname, '../static', 'index.html'));\n});\n\napp.listen(3000, () => {\n  console.log('App started again');\n});\n"]}